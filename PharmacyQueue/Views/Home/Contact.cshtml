@{
    ViewData["Title"] = "Contact Us";
}

<div class="container py-5">
    <div class="row mb-5">
        <div class="col-lg-8 mx-auto text-center">
            <h1 class="display-4 mb-4">Contact Us</h1>
            <div class="divider-custom mx-auto mb-5">
                <div class="divider-custom-line"></div>
                <div class="divider-custom-icon">
                    <i class="fas fa-headset"></i>
                </div>
                <div class="divider-custom-line"></div>
            </div>
            <p class="lead text-muted">We'd love to hear from you. Here's how you can reach us.</p>
        </div>
    </div>

    <div class="row g-5">
        <!-- Contact Information -->
        <div class="col-lg-5">
            <div class="card border-0 shadow-sm h-100">
                <div class="card-body p-4 p-lg-5">
                    <h3 class="text-primary mb-4">Get in Touch</h3>

                    <div class="d-flex mb-4">
                        <div class="bg-primary text-white rounded-circle d-flex align-items-center justify-content-center me-3 flex-shrink-0" style="width: 46px; height: 46px; min-width: 46px;">
                            <i class="fas fa-map-marker-alt"></i>
                        </div>
                        <div>
                            <h5>Our Location</h5>
                            <p class="mb-0">  IDK Pharmacy<br>1234 IDK Street<br>Brampton, ON L1A 2N3<br>Canada</p>
                        </div>
                    </div>

                    <div class="d-flex mb-4">
                        <div class="bg-primary text-white rounded-circle d-flex align-items-center justify-content-center me-3 flex-shrink-0" style="width: 46px; height: 46px; min-width: 46px;">
                            <i class="fas fa-phone-alt"></i>
                        </div>
                        <div>
                            <h5>Phone</h5>
                            <p class="mb-0"><a href="tel:+1416555123" class="text-decoration-none">+1 (416) 555-1234</a></p>
                        </div>
                    </div>

                    <div class="d-flex mb-4">
                        <div class="bg-primary text-white rounded-circle d-flex align-items-center justify-content-center me-3 flex-shrink-0" style="width: 46px; height: 46px; min-width: 46px;">
                            <i class="fas fa-envelope"></i>
                        </div>
                        <div>
                            <h5>Email</h5>
                            <p class="mb-0"><a href="mailto:info@pharmacyqueue.com" class="text-decoration-none">info@pharmacyqueue.com</a></p>
                        </div>
                    </div>

                    <div class="d-flex mb-4">
                        <div class="bg-primary text-white rounded-circle d-flex align-items-center justify-content-center me-3 flex-shrink-0" style="width: 46px; height: 46px; min-width: 46px;">
                            <i class="far fa-clock"></i>
                        </div>
                        <div>
                            <h5>Working Hours</h5>
                            <p class="mb-1">Monday - Friday: 8:00 AM - 8:00 PM</p>
                            <p class="mb-1">Saturday: 9:00 AM - 5:00 PM</p>
                            <p class="mb-0">Sunday: Closed</p>
                        </div>
                    </div>

                    <h4 class="mt-5 mb-3">Follow Us</h4>
                    <div class="d-flex">
                        <a href="#" class="social-icon me-3">
                            <div class="bg-primary text-white rounded-circle d-flex align-items-center justify-content-center" style="width: 40px; height: 40px;">
                                <i class="fab fa-facebook-f"></i>
                            </div>
                        </a>
                        <a href="#" class="social-icon me-3">
                            <div class="bg-primary text-white rounded-circle d-flex align-items-center justify-content-center" style="width: 40px; height: 40px;">
                                <i class="fab fa-twitter"></i>
                            </div>
                        </a>
                        <a href="#" class="social-icon me-3">
                            <div class="bg-primary text-white rounded-circle d-flex align-items-center justify-content-center" style="width: 40px; height: 40px;">
                                <i class="fab fa-instagram"></i>
                            </div>
                        </a>
                        <a href="#" class="social-icon">
                            <div class="bg-primary text-white rounded-circle d-flex align-items-center justify-content-center" style="width: 40px; height: 40px;">
                                <i class="fab fa-linkedin-in"></i>
                            </div>
                        </a>
                    </div>
                </div>
            </div>
        </div>

        <!-- Contact Form -->
        <div class="col-lg-7">
            <div class="card border-0 shadow-sm">
                <div class="card-body p-4 p-lg-5">
                    <h3 class="text-primary mb-4">Send Us a Message</h3>
                    <form id="contactForm" action="https://formspree.io/f/xnnpgrel" method="POST">
                        <div class="row g-3">
                            <div class="col-md-6">
                                <div class="form-floating mb-3">
                                    <input type="text" class="form-control" id="name" name="name" placeholder="Donald Trump" required>
                                    <label for="name">Your Name</label>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-floating mb-3">
                                    <input type="email" class="form-control" id="email" name="email" placeholder="name@example.com" required>
                                    <label for="email">Your Email</label>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-floating mb-3">
                                    <input type="tel" class="form-control" id="phone" name="phone" placeholder="+1 (416) 555-1234">
                                    <label for="phone">Your Phone</label>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-floating mb-3">
                                    <select class="form-select" id="subject" name="subject" required>
                                        <option value="" selected disabled>Please select</option>
                                        <option value="General Inquiry">General Inquiry</option>
                                        <option value="Appointment Question">Appointment Question</option>
                                        <option value="Prescription Refill">Prescription Refill</option>
                                        <option value="Feedback">Feedback</option>
                                        <option value="Other">Other</option>
                                    </select>
                                    <label for="subject">Subject</label>
                                </div>
                            </div>
                            <div class="col-12">
                                <div class="form-floating mb-3">
                                    <textarea class="form-control" id="message" name="message" style="height: 150px" placeholder="Your message" required></textarea>
                                    <label for="message">Your Message</label>
                                </div>
                            </div>
                            <div class="col-12">
                                <div class="form-check mb-3">
                                    <input class="form-check-input" type="checkbox" id="privacy" name="privacy-accepted" required>
                                    <label class="form-check-label" for="privacy">
                                        I agree with the <a href="@Url.Action("Privacy", "Home")">privacy policy</a> and consent to the processing of my data.
                                    </label>
                                </div>
                            </div>
                            <div class="col-12">
                                <button type="submit" class="btn btn-primary btn-lg">
                                    <i class="fas fa-paper-plane me-2"></i>Send Message
                                </button>
                            </div>
                        </div>
                        <!-- Formspree hidden honeypot field to prevent spam -->
                        <input type="text" name="_gotcha" style="display:none">
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Map Section -->
    <div class="row mt-5">
        <div class="col-12">
            <div class="card border-0 shadow-sm">
                <div class="card-body p-0">
                    <div class="ratio ratio-21x9">
                        <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d92433.84880929806!2d-79.82974337042506!3d43.72529793490509!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x882b15eaa5d05abf%3A0x352d31667cc38677!2sBrampton%2C%20ON%2C%20Canada!5e0!3m2!1sen!2sus!4v1690223342088!5m2!1sen!2sus"
                                style="border:0;" allowfullscreen="" loading="lazy"></iframe>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- FAQ Section -->
    <div class="row mt-5">
        <div class="col-lg-10 mx-auto">
            <h3 class="text-primary text-center mb-4">Frequently Asked Questions</h3>
            <div class="accordion" id="faqAccordion">
                <div class="accordion-item border-0 mb-3 shadow-sm">
                    <h2 class="accordion-header" id="headingOne">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="false" aria-controls="collapseOne">
                            How do I book an appointment?
                        </button>
                    </h2>
                    <div id="collapseOne" class="accordion-collapse collapse" aria-labelledby="headingOne" data-bs-parent="#faqAccordion">
                        <div class="accordion-body">
                            You can book an appointment through our website by navigating to the "Book Appointment" page. Fill out the required information, select your preferred date and time, and submit the form. You'll receive a confirmation email with your appointment details.
                        </div>
                    </div>
                </div>
                <div class="accordion-item border-0 mb-3 shadow-sm">
                    <h2 class="accordion-header" id="headingTwo">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                            What should I bring to my appointment?
                        </button>
                    </h2>
                    <div id="collapseTwo" class="accordion-collapse collapse" aria-labelledby="headingTwo" data-bs-parent="#faqAccordion">
                        <div class="accordion-body">
                            Please bring your health card, a list of your current medications, and any prescription from your doctor. If you have any medical history documents that might be relevant to your visit, those would be helpful as well.
                        </div>
                    </div>
                </div>
                <div class="accordion-item border-0 mb-3 shadow-sm">
                    <h2 class="accordion-header" id="headingThree">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
                            How can I check the status of my appointment?
                        </button>
                    </h2>
                    <div id="collapseThree" class="accordion-collapse collapse" aria-labelledby="headingThree" data-bs-parent="#faqAccordion">
                        <div class="accordion-body">
                            You can check the status of your appointment by going to the "Check Status" page on our website and entering your appointment reference number. This will show you your current position in the queue and estimated wait time.
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <script>
        // Form submission confirmation handled by Formspree redirect
        // Adding event listener to show success message if redirected from Formspree
        document.addEventListener('DOMContentLoaded', function() {
            // Check if URL has success parameter (Formspree will redirect back with ?success=true)
            const urlParams = new URLSearchParams(window.location.search);
            if (urlParams.get('success') === 'true') {
                // Create and show success message
                const alertEl = document.createElement('div');
                alertEl.className = 'alert alert-success alert-dismissible fade show mt-3';
                alertEl.role = 'alert';
                alertEl.innerHTML = `
                    <strong>Thank you!</strong> Your message has been sent successfully. We'll get back to you soon.
                    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                `;

                // Add alert to the form
                document.getElementById('contactForm').appendChild(alertEl);

                // Auto-dismiss after 5 seconds
                setTimeout(() => {
                    const bsAlert = new bootstrap.Alert(alertEl);
                    bsAlert.close();
                }, 5000);
            }
        });
    </script>
}

<!-- Add custom styles -->
<style>
    .divider-custom {
        width: 100%;
        display: flex;
        justify-content: center;
        align-items: center;
    }

    .divider-custom-line {
        width: 100%;
        max-width: 7rem;
        height: 0.25rem;
        background-color: var(--primary);
        border-radius: 1rem;
        border: none;
    }

    .divider-custom-icon {
        font-size: 1.5rem;
        color: var(--primary);
        margin: 0 1.5rem;
    }

    .accordion-button:not(.collapsed) {
        color: var(--primary);
        background-color: var(--light-cyan, #caf0f8);
    }

    .accordion-button:focus {
        border-color: var(--primary-light);
        box-shadow: 0 0 0 0.25rem rgba(0, 180, 216, 0.25);
    }
</style>